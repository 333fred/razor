<Project>

  <Target Name="_PublishLanguageServerRids" AfterTargets="Pack" Condition="'$(DotNetBuildFromSource)' != 'true'">
    <PropertyGroup>
      <AnalyzersSolutionPath>$(MSBuildThisFileDirectory)..\src\Analyzers\Analyzers.sln</AnalyzersSolutionPath>
      <LanguageServerProject>$(MSBuildThisFileDirectory)..\src\Razor\src\rzls\rzls.csproj</LanguageServerProject>
      <RazorSolutionPath>$(MSBuildThisFileDirectory)..\Razor.sln</RazorSolutionPath>
    </PropertyGroup>

    <MSBuild Projects="$(AnalyzersSolutionPath)"
             Targets="Restore" />
    <MSBuild Projects="$(AnalyzersSolutionPath)"
             Targets="Build" />
    <MSBuild Projects="$(RazorSolutionPath)"
             Targets="Restore" />
    <MSBuild Projects="$(LanguageServerProject)"
             Targets="PublishAllRids" />
  </Target>

</Project>
